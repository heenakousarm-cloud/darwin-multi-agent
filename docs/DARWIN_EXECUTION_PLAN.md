# ğŸ§¬ Darwin - Execution Plan v2.1

> **The Self-Evolving Product Engine**  
> *"Darwin doesn't just REPORT the weather. It FIXES the roof."*

**Last Updated:** February 7, 2026

---

## ğŸ†• Status Update (Feb 7, 2026)

| Phase | Status | Notes |
|-------|--------|-------|
| Phase 0: Foundation Setup | âœ… Complete | Python, MongoDB Atlas, all APIs configured |
| Phase 1: Watcher Agent | âœ… Complete | Detects friction from PostHog |
| Phase 2: Analyst Agent | âœ… Complete | Diagnoses root cause, recommends fixes |
| Phase 3: NitroStack MCP | â¬œ Not Started | **NEXT STEP** |
| Phase 4: Engineer Agent | âœ… Complete | Creates GitHub PRs (patch-based) |
| Phase 5: Demo Polish | â¬œ Partial | Need NitroStack UI |

**NEW: Darwin REST API** - A FastAPI layer has been added between MongoDB and NitroStack for secure data access.

---

## ğŸ“‹ Table of Contents

1. [Project Overview](#1-project-overview)
2. [Complete Architecture](#2-complete-architecture)
3. [Tech Stack Decisions](#3-tech-stack-decisions)
4. [Figma Design System](#4-figma-design-system)
5. [Project Structure](#5-project-structure)
6. [Phase 0: Foundation Setup](#6-phase-0-foundation-setup)
7. [Phase 1: The Watcher Agent (Eyes)](#7-phase-1-the-watcher-agent-eyes)
8. [Phase 2: The Analyst Agent (Brain)](#8-phase-2-the-analyst-agent-brain)
9. [Phase 3: NitroStack MCP Server](#9-phase-3-nitrostack-mcp-server)
10. [Phase 4: The Engineer Agent (Hands)](#10-phase-4-the-engineer-agent-hands)
11. [Phase 5: Demo Polish & Integration](#11-phase-5-demo-polish--integration)
12. [Demo Script](#12-demo-script)
13. [Hackathon Scope Focus](#13-hackathon-scope-focus)

---

## 1. Project Overview

### 1.1 What is Darwin?

Darwin is an **Autonomous Growth Engineer** that:
- **Observes** user behavior (rage clicks, drop-offs, errors)
- **Analyzes** root causes of friction
- **Proposes** code fixes
- **Executes** via GitHub PRs (with human approval)

### 1.2 The Vision: PMF Acceleration Engine

Darwin powers the **PMF Acceleration Engine** â€” an AI Product Copilot that shortens the path to Product-Market Fit by:
- Centralizing product data + business context
- Detecting signals, anomalies, and opportunities automatically
- Explaining WHY something is happening (root cause)
- Recommending WHAT to do next
- Executing via experiments, feature flags, and code changes

### 1.3 The Three Agents

| Agent | Nickname | Responsibility | Trigger |
|-------|----------|----------------|---------|
| **Watcher** | ğŸ•µï¸ Eyes | Detect friction signals from analytics | Cron / Manual |
| **Analyst** | ğŸ§  Brain | Diagnose root cause, propose fix | New Signal in DB |
| **Engineer** | ğŸ‘©â€ğŸ’» Hands | Write code, create PR | Human Approval |

---

## 2. Complete Architecture

### 2.1 Four-Layer Architecture (Updated Feb 7, 2026)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DARWIN COMPLETE ARCHITECTURE (v2.1)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚              LAYER 1: DARWIN AGENTS (Python Backend) âœ… COMPLETE    â”‚    â”‚
â”‚   â”‚                                                                     â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚    â”‚
â”‚   â”‚   â”‚   Watcher   â”‚    â”‚   Analyst   â”‚    â”‚  Engineer   â”‚            â”‚    â”‚
â”‚   â”‚   â”‚   Agent     â”‚    â”‚   Agent     â”‚    â”‚   Agent     â”‚            â”‚    â”‚
â”‚   â”‚   â”‚   ğŸ•µï¸ Eyes   â”‚    â”‚   ğŸ§  Brain  â”‚    â”‚  ğŸ‘©â€ğŸ’» Hands  â”‚            â”‚    â”‚
â”‚   â”‚   â”‚   âœ… Done   â”‚    â”‚   âœ… Done   â”‚    â”‚   âœ… Done   â”‚            â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚    â”‚
â”‚   â”‚          â”‚                  â”‚                  â”‚                    â”‚    â”‚
â”‚   â”‚          â”‚ PostHog API      â”‚                  â”‚ GitHub API         â”‚    â”‚
â”‚   â”‚          â–¼                  â–¼                  â–¼                    â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚   â”‚   â”‚              MongoDB Atlas (Cloud) âœ… COMPLETE           â”‚      â”‚    â”‚
â”‚   â”‚   â”‚  â€¢ signals    â€¢ ux_issues    â€¢ tasks    â€¢ pull_requests â”‚      â”‚    â”‚
â”‚   â”‚   â”‚  â€¢ insights   â€¢ agent_logs   â€¢ code_fixes               â”‚      â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â”‚                                           â”‚
â”‚                                  â–¼                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚         ğŸ†• LAYER 1.5: DARWIN REST API (FastAPI) âœ… COMPLETE         â”‚    â”‚
â”‚   â”‚                                                                     â”‚    â”‚
â”‚   â”‚   URL: http://localhost:8000                                       â”‚    â”‚
â”‚   â”‚   Auth: Bearer Token (DARWIN_API_KEY)                              â”‚    â”‚
â”‚   â”‚                                                                     â”‚    â”‚
â”‚   â”‚   Endpoints:                                                        â”‚    â”‚
â”‚   â”‚   â€¢ GET  /api/signals/           â€¢ GET  /api/ux-issues/            â”‚    â”‚
â”‚   â”‚   â€¢ POST /api/ux-issues/{id}/approve                               â”‚    â”‚
â”‚   â”‚   â€¢ POST /api/ux-issues/{id}/reject                                â”‚    â”‚
â”‚   â”‚   â€¢ GET  /api/pull-requests/     â€¢ POST /api/darwin/run            â”‚    â”‚
â”‚   â”‚   â€¢ GET  /api/stats/             â€¢ GET  /api/stats/insights        â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â”‚                                           â”‚
â”‚                                  â”‚ API Calls (Bearer Token)                  â”‚
â”‚                                  â–¼                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚         LAYER 2: NITROSTACK MCP SERVER (TypeScript) â¬œ TO BUILD     â”‚    â”‚
â”‚   â”‚                                                                     â”‚    â”‚
â”‚   â”‚   @Tools (call Darwin API):                                        â”‚    â”‚
â”‚   â”‚   â€¢ get_signals        â†’ GET /api/signals/                         â”‚    â”‚
â”‚   â”‚   â€¢ get_ux_issues      â†’ GET /api/ux-issues/                       â”‚    â”‚
â”‚   â”‚   â€¢ approve_fix        â†’ POST /api/ux-issues/{id}/approve          â”‚    â”‚
â”‚   â”‚   â€¢ trigger_darwin     â†’ POST /api/darwin/run                      â”‚    â”‚
â”‚   â”‚                                                                     â”‚    â”‚
â”‚   â”‚   @Widgets:                                                         â”‚    â”‚
â”‚   â”‚   â€¢ signals-dashboard  â€¢ decision-center  â€¢ pr-viewer              â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â”‚                                           â”‚
â”‚                                  â–¼                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚              LAYER 3: AI CHAT (Cursor / Claude / NitroChat)         â”‚    â”‚
â”‚   â”‚                                                                     â”‚    â”‚
â”‚   â”‚   User: "Show me UX issues"                                        â”‚    â”‚
â”‚   â”‚   AI: [decision-center widget renders with approve/reject buttons] â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATA FLOW                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   PostHog â”€â”€â–º Watcher Agent â”€â”€â–º MongoDB (signals)                       â”‚
â”‚                                      â”‚                                   â”‚
â”‚                                      â–¼                                   â”‚
â”‚                              Analyst Agent                               â”‚
â”‚                                      â”‚                                   â”‚
â”‚                                      â–¼                                   â”‚
â”‚                         MongoDB (insights: PENDING)                      â”‚
â”‚                                      â”‚                                   â”‚
â”‚                                      â–¼                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                 NITROSTACK DECISION CENTER                        â”‚  â”‚
â”‚   â”‚                                                                   â”‚  â”‚
â”‚   â”‚   @Resource('decision_center') â”€â”€â–º Renders Figma-style cards     â”‚  â”‚
â”‚   â”‚                                                                   â”‚  â”‚
â”‚   â”‚   User clicks "Add to Roadmap" or "Create Task"                  â”‚  â”‚
â”‚   â”‚                     â”‚                                             â”‚  â”‚
â”‚   â”‚                     â–¼                                             â”‚  â”‚
â”‚   â”‚   @Tool('approve_recommendation') â”€â”€â–º Updates MongoDB            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                   â”‚
â”‚                                      â–¼                                   â”‚
â”‚                         MongoDB (insights: APPROVED)                     â”‚
â”‚                                      â”‚                                   â”‚
â”‚                                      â–¼                                   â”‚
â”‚                            Engineer Agent                                â”‚
â”‚                                      â”‚                                   â”‚
â”‚                                      â–¼                                   â”‚
â”‚                             GitHub PR Created                            â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Tech Stack Decisions

### 3.1 Layer 1: Darwin Agents (Python)

| Component | Technology | Reason |
|-----------|------------|--------|
| **Language** | Python 3.11+ | AI/ML ecosystem, fast prototyping |
| **AI/LLM** | OpenAI GPT-4 / Anthropic Claude | Best code generation |
| **Agent Framework** | Simple Python (no framework) | Hackathon simplicity |
| **Database** | MongoDB Atlas (Free Tier) | Flexible schema, easy setup |
| **Analytics** | PostHog API + MCP Tools | Direct integration available |

### 3.2 Layer 2: NitroStack MCP Server (TypeScript)

| Component | Technology | Reason |
|-----------|------------|--------|
| **Framework** | NitroStack SDK | `@Tool`, `@Widget`, `@Resource` decorators |
| **Language** | TypeScript | Type-safe, NitroStack native |
| **UI Components** | NitroStack Widgets | Renders in NitroChat/Studio |
| **Styling** | Tailwind CSS | Matches Figma design system |
| **Database Client** | mongodb (npm) | Read from same MongoDB |

### 3.3 Layer 3: Deployment

| Component | Technology | Reason |
|-----------|------------|--------|
| **Deployment** | NitroCloud | One-click deploy |
| **Client** | NitroChat | Shareable demo link |
| **Dev Environment** | NitroStudio | Testing & debugging |

### 3.4 External Services

| Service | Purpose | Integration |
|---------|---------|-------------|
| **PostHog** | Analytics data source | API + MCP Tools |
| **GitHub** | PR creation | PyGithub |
| **MongoDB Atlas** | State management | pymongo + mongodb (npm) |

### 3.5 Environment Variables

```env
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# DARWIN ENVIRONMENT CONFIGURATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# LLM Provider (choose one)
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...

# MongoDB Atlas
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/darwin

# GitHub (for PR creation)
GITHUB_TOKEN=ghp_...
GITHUB_REPO_OWNER=your-org
GITHUB_REPO_NAME=demo-ecommerce-app

# PostHog
POSTHOG_API_KEY=phx_...
POSTHOG_PROJECT_ID=12345
POSTHOG_HOST=https://app.posthog.com

# NitroStack (if needed)
NITROSTACK_API_KEY=...
```

---

## 4. Figma Design System

### 4.1 Design Principles (From Figma)

Based on the PMF Acceleration Engine Figma design:

| Principle | Implementation |
|-----------|----------------|
| **Frosted glass sidebar** | `backdrop-blur-xl`, dark background |
| **Simplified components** | Clean cards, minimal badges |
| **Monochrome charts** | Grayscale instead of rainbow colors |
| **Clear hierarchy** | Important info stands out naturally |
| **Focus on content** | Less visual noise, more data |

### 4.2 Color Palette

```css
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DARWIN DESIGN TOKENS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

:root {
  /* Background Colors */
  --bg-sidebar: #1a1a2e;           /* Dark sidebar */
  --bg-sidebar-hover: #16213e;     /* Sidebar item hover */
  --bg-main: #ffffff;              /* Main content area */
  --bg-card: #ffffff;              /* Card background */
  --bg-card-border: #f0f0f0;       /* Subtle card border */
  
  /* Text Colors */
  --text-primary: #1a1a2e;         /* Main headings */
  --text-secondary: #6b7280;       /* Descriptions, labels */
  --text-sidebar: #ffffff;         /* Sidebar text */
  --text-muted: #9ca3af;           /* Muted text */
  
  /* Accent Colors */
  --accent-primary: #1a1a2e;       /* Primary buttons */
  --accent-success: #10b981;       /* Positive metrics (+12.3%) */
  --accent-danger: #ef4444;        /* Negative metrics (-3.1%) */
  --accent-warning: #f59e0b;       /* Warnings, medium priority */
  
  /* Status Colors */
  --status-critical: #fee2e2;      /* Critical badge bg */
  --status-critical-text: #dc2626; /* Critical badge text */
  --status-high: #fef3c7;          /* High priority bg */
  --status-high-text: #d97706;     /* High priority text */
  --status-running: #d1fae5;       /* Running/Active bg */
  --status-running-text: #059669;  /* Running/Active text */
  
  /* Chart Colors (Monochrome) */
  --chart-line: #1a1a2e;           /* Primary chart line */
  --chart-area: #e5e7eb;           /* Chart fill area */
  --chart-grid: #f3f4f6;           /* Chart grid lines */
}
```

### 4.3 Typography

```css
/* Typography */
:root {
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  
  /* Font Sizes */
  --text-xs: 0.75rem;    /* 12px - Labels, badges */
  --text-sm: 0.875rem;   /* 14px - Body text */
  --text-base: 1rem;     /* 16px - Default */
  --text-lg: 1.125rem;   /* 18px - Card titles */
  --text-xl: 1.25rem;    /* 20px - Section headers */
  --text-2xl: 1.5rem;    /* 24px - Page titles */
  --text-4xl: 2.25rem;   /* 36px - Big numbers */
  --text-6xl: 3.75rem;   /* 60px - PMF Score */
  
  /* Font Weights */
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;
}
```

### 4.4 Component Specifications

#### 4.4.1 Sidebar Navigation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ Product Health           â”‚  â† Selected (white bg, rounded)
â”‚  â—‹ PMF Audit                â”‚
â”‚  âš  Signals & Alerts    [7]  â”‚  â† Badge for count
â”‚  â— Decision Center    [12]  â”‚
â”‚  â–³ Experiments         [3]  â”‚
â”‚  â†” Infra Correlation        â”‚
â”‚  âœ‹ UX Intelligence     [5]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- Width: 280px
- Background: var(--bg-sidebar)
- Item padding: 12px 16px
- Selected item: white bg, rounded-lg
- Badge: small circle, right-aligned
```

#### 4.4.2 Metric Card

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Active Users                       â”‚
â”‚                                     â”‚
â”‚  3,247                              â”‚  â† Large number
â”‚  â†— +12.3%                           â”‚  â† Green for positive
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- Background: white
- Border: 1px solid var(--bg-card-border)
- Border-radius: 12px
- Padding: 24px
- Number: text-4xl, font-bold
- Change indicator: text-sm, colored
```

#### 4.4.3 Signal/Alert Card

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš  Significant Drop-off in Onboarding Flow          [Investigate]â”‚
â”‚                                                                  â”‚
â”‚  Step 3 completion rate dropped from 68% to 42% in the last     â”‚
â”‚  48 hours.                                                       â”‚
â”‚                                                                  â”‚
â”‚  Metric: Activation Rate    Change: -26%    Confidence: 96%     â”‚
â”‚  â—‹ 2 hours ago                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- Icon: Warning (red circle for critical, trending up for opportunity)
- Title: text-lg, font-semibold
- Description: text-sm, text-secondary
- Metadata row: flex, gap-8, text-xs
- Button: "Investigate" - dark, rounded-full
```

#### 4.4.4 Recommendation Card (Decision Center)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Add SSO Integration                      [Critical]             â”‚
â”‚                                                    [Add to Roadmap â†’]â”‚
â”‚  Blocking $180K+ in enterprise deals. 67% of enterprise         â”‚
â”‚  prospects require SSO.                                          â”‚
â”‚                                                                  â”‚
â”‚  Impact: +$180K pipeline, +15% close rate                       â”‚
â”‚  â—‹ 3 weeks                          Confidence: 98%             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- Priority badge: Critical (red), High (yellow), Medium (gray)
- Action button: "Add to Roadmap â†’" - dark bg, white text
- Impact: text-sm, text-secondary
- Confidence: percentage with label
```

#### 4.4.5 UX Intelligence Issue Card

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ‹ Payment Form Input Not Responding              [critical]    â”‚
â”‚                                                                  â”‚
â”‚  Page: Checkout - Step 2  â€¢  Affected: 234 users  â€¢  Replays: 87â”‚
â”‚                                                                  â”‚
â”‚  Users rage-clicking on credit card input. Field appears        â”‚
â”‚  disabled due to CSS z-index issue.                              â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  IMPACT                        CONFIDENCE               â”‚    â”‚
â”‚  â”‚  Blocking 12% of checkout      98%                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  RECOMMENDED FIX                                        â”‚    â”‚
â”‚  â”‚  Fix CSS z-index - payment iframe      [Create Task â†’]  â”‚    â”‚
â”‚  â”‚  covered by form overlay                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- This is the KEY card for Darwin demo
- "Create Task" button triggers Engineer Agent
```

### 4.5 Page Layouts

#### 4.5.1 Product Health Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                       â”‚
â”‚  Product Health                                                       â”‚
â”‚  Real-time insights into your product metrics                         â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PMF Readiness Score                              â†— +8 pts     â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  67 /100                                                        â”‚  â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                        â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  Approaching PMF - Focus on retention & activation              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Active   â”‚ â”‚Activationâ”‚ â”‚ 4-Week   â”‚ â”‚   MRR    â”‚                â”‚
â”‚  â”‚ Users    â”‚ â”‚ Rate     â”‚ â”‚Retention â”‚ â”‚          â”‚                â”‚
â”‚  â”‚ 3,247    â”‚ â”‚ 72%      â”‚ â”‚ 45%      â”‚ â”‚ $24.3K   â”‚                â”‚
â”‚  â”‚ â†—+12.3%  â”‚ â”‚ â†—+5.2%   â”‚ â”‚ â†˜-3.1%   â”‚ â”‚ â†—+18.7%  â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Cohort Retention   â”‚  â”‚  Activation Trend   â”‚                    â”‚
â”‚  â”‚  [Chart: W1-W6]     â”‚  â”‚  [Chart: Mon-Sun]   â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Feature Adoption                                               â”‚  â”‚
â”‚  â”‚  Dashboard    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  92%    â”‚  â”‚
â”‚  â”‚  Reports      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ           78%    â”‚  â”‚
â”‚  â”‚  Integrations â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                       45%    â”‚  â”‚
â”‚  â”‚  API Access   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                23%    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.5.2 Signals & Alerts Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                       â”‚
â”‚  Signals & Alerts                                                     â”‚
â”‚  AI-detected anomalies and opportunities                              â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Critical â”‚ â”‚Opportun- â”‚ â”‚  Total   â”‚ â”‚   Avg    â”‚                â”‚
â”‚  â”‚ Alerts   â”‚ â”‚ ities    â”‚ â”‚ Signals  â”‚ â”‚Confidenceâ”‚                â”‚
â”‚  â”‚    1     â”‚ â”‚    2     â”‚ â”‚    5     â”‚ â”‚   90%    â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ âš  Significant Drop-off in Onboarding Flow       [Investigate] â”‚  â”‚
â”‚  â”‚   Step 3 completion rate dropped from 68% to 42%...           â”‚  â”‚
â”‚  â”‚   Metric: Activation Rate  Change: -26%  Confidence: 96%      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â†— Power User Segment Growing Rapidly            [Investigate] â”‚  â”‚
â”‚  â”‚   Users completing 5+ actions/day increased 34%...            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ âš  API Integration Completion Declining          [Investigate] â”‚  â”‚
â”‚  â”‚   Only 23% of new users completing API setup...               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.5.3 Decision Center Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                       â”‚
â”‚  Decision Center                                                      â”‚
â”‚  AI-generated product recommendations                                 â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  Total   â”‚ â”‚ Critical â”‚ â”‚   High   â”‚ â”‚   Avg    â”‚                â”‚
â”‚  â”‚ Recomm.  â”‚ â”‚ Priority â”‚ â”‚ Priority â”‚ â”‚Confidenceâ”‚                â”‚
â”‚  â”‚    5     â”‚ â”‚    2     â”‚ â”‚    2     â”‚ â”‚   91%    â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Add SSO Integration                 [Critical]                 â”‚  â”‚
â”‚  â”‚  Blocking $180K+ in enterprise deals...       [Add to Roadmap â†’]â”‚  â”‚
â”‚  â”‚  Impact: +$180K pipeline  â—‹ 3 weeks  Confidence: 98%           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Fix Onboarding Step 3 Drop-off      [Critical]                 â”‚  â”‚
â”‚  â”‚  Activation rate dropped 26% in 48 hours...   [Add to Roadmap â†’]â”‚  â”‚
â”‚  â”‚  Impact: +26% activation recovery  â—‹ 3 days  Confidence: 96%   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.5.4 UX Intelligence Page (KEY FOR DARWIN DEMO)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                       â”‚
â”‚  UX Intelligence                                                      â”‚
â”‚  AI-powered analysis of user behavior                                 â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Critical â”‚ â”‚   High   â”‚ â”‚ Sessions â”‚ â”‚  Rage    â”‚                â”‚
â”‚  â”‚ Issues   â”‚ â”‚ Priority â”‚ â”‚ Analyzed â”‚ â”‚  Clicks  â”‚                â”‚
â”‚  â”‚    1     â”‚ â”‚    2     â”‚ â”‚  15.6K   â”‚ â”‚   234    â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  âœ‹ Payment Form Input Not Responding           [critical]      â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  Page: Checkout - Step 2  â€¢  Affected: 234 users  â€¢  Replays: 87â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  Users rage-clicking on credit card input. Field appears       â”‚  â”‚
â”‚  â”‚  disabled due to CSS z-index issue.                             â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚  IMPACT                         CONFIDENCE            â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  Blocking 12% of checkout       98%                   â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚  RECOMMENDED FIX                                       â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  Fix CSS z-index - payment iframe     [Create Task â†’]  â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  covered by form overlay                               â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Project Structure

```
Darwin/
â”œâ”€â”€ README.md                         # Project overview
â”œâ”€â”€ DARWIN_EXECUTION_PLAN.md          # This file
â”œâ”€â”€ .env.example                      # Environment template
â”œâ”€â”€ .gitignore
â”œâ”€â”€ docker-compose.yml                # Local MongoDB (optional)
â”‚
â”œâ”€â”€ agents/                           # LAYER 1: Python Agents
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py                     # Shared configuration
â”‚   â”œâ”€â”€ db.py                         # MongoDB connection
â”‚   â”œâ”€â”€ models.py                     # Pydantic models (Signal, Insight, etc.)
â”‚   â”œâ”€â”€ watcher.py                    # Agent 1: The Eyes ğŸ•µï¸
â”‚   â”œâ”€â”€ analyst.py                    # Agent 2: The Brain ğŸ§ 
â”‚   â””â”€â”€ engineer.py                   # Agent 3: The Hands ğŸ‘©â€ğŸ’»
â”‚
â”œâ”€â”€ nitrostack/                       # LAYER 2: NitroStack MCP Server
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ tailwind.config.js            # Figma design tokens
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts                  # Server entry point
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ resources/                # @Resource decorators
â”‚   â”‚   â”‚   â”œâ”€â”€ productHealth.ts      # PMF score, metrics
â”‚   â”‚   â”‚   â”œâ”€â”€ signalsAlerts.ts      # Watcher output
â”‚   â”‚   â”‚   â”œâ”€â”€ uxIntelligence.ts     # Analyst rage click analysis
â”‚   â”‚   â”‚   â”œâ”€â”€ decisionCenter.ts     # Pending recommendations
â”‚   â”‚   â”‚   â”œâ”€â”€ experiments.ts        # A/B tests
â”‚   â”‚   â”‚   â””â”€â”€ pmfAudit.ts           # Feature audit
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ tools/                    # @Tool decorators
â”‚   â”‚   â”‚   â”œâ”€â”€ investigate.ts        # "Investigate" button
â”‚   â”‚   â”‚   â”œâ”€â”€ createTask.ts         # "Create Task" â†’ triggers Engineer
â”‚   â”‚   â”‚   â”œâ”€â”€ addToRoadmap.ts       # "Add to Roadmap" button
â”‚   â”‚   â”‚   â””â”€â”€ viewDetails.ts        # "View Details" button
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ widgets/                  # @Widget decorators
â”‚   â”‚   â”‚   â”œâ”€â”€ MetricCard.tsx        # Reusable metric display
â”‚   â”‚   â”‚   â”œâ”€â”€ SignalCard.tsx        # Signal/Alert card
â”‚   â”‚   â”‚   â”œâ”€â”€ InsightCard.tsx       # UX Intelligence issue card
â”‚   â”‚   â”‚   â”œâ”€â”€ RecommendationCard.tsx # Decision Center card
â”‚   â”‚   â”‚   â””â”€â”€ ExperimentCard.tsx    # Experiment progress card
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ db/
â”‚   â”‚       â””â”€â”€ mongodb.ts            # MongoDB client for NitroStack
â”‚   â”‚
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ darwin.css                # Figma design tokens as CSS
â”‚
â”œâ”€â”€ demo-app/                         # Demo e-commerce app (existing)
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â””â”€â”€ PaymentForm.tsx       # Contains the z-index bug!
â”‚   â””â”€â”€ routes.json                   # URL â†’ Component mapping
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ seed_data.py                  # Seed MongoDB with demo data
â”‚   â”œâ”€â”€ run_watcher.py                # Manual trigger for Watcher
â”‚   â”œâ”€â”€ run_analyst.py                # Manual trigger for Analyst
â”‚   â”œâ”€â”€ run_engineer.py               # Manual trigger for Engineer
â”‚   â””â”€â”€ demo_flow.py                  # Run complete demo sequence
â”‚
â”œâ”€â”€ data/
â”‚   â””â”€â”€ mock/
â”‚       â”œâ”€â”€ signals.json              # Sample signals
â”‚       â”œâ”€â”€ insights.json             # Sample insights
â”‚       â””â”€â”€ experiments.json          # Sample experiments
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ test_watcher.py
    â”œâ”€â”€ test_analyst.py
    â””â”€â”€ test_engineer.py
```

---

## 6. Phase 0: Foundation Setup

**Goal:** Get the development environment ready.

**Duration:** 1-2 hours

### 6.1 Tasks

| Task | Description | Command/Action |
|------|-------------|----------------|
| 6.1.1 | Create project directory | `mkdir Darwin && cd Darwin` |
| 6.1.2 | Initialize Git | `git init` |
| 6.1.3 | Create `.gitignore` | Add Python, Node, env files |
| 6.1.4 | Create `.env.example` | Template for environment vars |
| 6.1.5 | Set up Python environment | `python -m venv venv && source venv/bin/activate` |
| 6.1.6 | Install Python dependencies | `pip install openai pymongo python-dotenv pygithub pydantic` |
| 6.1.7 | Set up MongoDB Atlas | Create free cluster at mongodb.com |
| 6.1.8 | Create GitHub repo | `gh repo create Darwin --public` |
| 6.1.9 | Initialize NitroStack | `npx nitrostack init nitrostack` |
| 6.1.10 | Push initial commit | `git add . && git commit -m "Initial setup"` |

### 6.2 Deliverables

- [ ] Git repository initialized and pushed to GitHub
- [ ] Python virtual environment working
- [ ] MongoDB Atlas cluster created & connected
- [ ] Environment variables configured
- [ ] NitroStack project scaffolded
- [ ] Team can clone and run

### 6.3 Verification

```bash
# Test MongoDB connection
python -c "from pymongo import MongoClient; print(MongoClient('your-uri').server_info())"

# Test OpenAI
python -c "import openai; print('OpenAI ready')"

# Test NitroStack
cd nitrostack && npm run dev
```

---

## 7. Phase 1: The Watcher Agent (Eyes)

**Goal:** Detect friction signals from PostHog/mock data and store in MongoDB.

**Duration:** 2-3 hours

### 7.1 What The Watcher Does

```
INPUT:  PostHog data (events, funnels, errors)
        OR Mock data (seeded friction signals)

PROCESS: 
  1. Query analytics for anomalies
  2. Detect "Friction Clusters" (rage clicks, drop-offs)
  3. Calculate severity (LOW, MEDIUM, HIGH, CRITICAL)
  4. Calculate confidence percentage

OUTPUT: Signal document in MongoDB â†’ Displayed in "Signals & Alerts" page
```

### 7.2 MongoDB Schema: Signals Collection

```python
# agents/models.py

from pydantic import BaseModel
from datetime import datetime
from typing import Optional, List
from enum import Enum

class SignalType(str, Enum):
    RAGE_CLICK = "RAGE_CLICK"
    DROP_OFF = "DROP_OFF"
    ERROR_SPIKE = "ERROR_SPIKE"
    ANOMALY = "ANOMALY"
    OPPORTUNITY = "OPPORTUNITY"

class Severity(str, Enum):
    LOW = "LOW"
    MEDIUM = "MEDIUM"
    HIGH = "HIGH"
    CRITICAL = "CRITICAL"

class Signal(BaseModel):
    """
    Matches Figma: Signals & Alerts card
    """
    _id: Optional[str] = None
    type: SignalType
    severity: Severity
    
    # Display fields (from Figma)
    title: str                      # "Significant Drop-off in Onboarding Flow"
    description: str                # "Step 3 completion rate dropped from 68% to 42%..."
    
    # Metrics row
    metric_name: str                # "Activation Rate"
    metric_change: str              # "-26%"
    confidence: int                 # 96
    
    # Context
    page: str                       # "/checkout"
    element: Optional[str] = None   # "button.submit-order"
    
    # Evidence
    affected_users: int             # 234
    session_count: int              # 87
    recording_urls: List[str] = []
    
    # Timestamps
    created_at: datetime = datetime.now()
    detected_ago: str               # "2 hours ago"
    
    # Processing state
    processed: bool = False         # Has Analyst seen it?
    investigated: bool = False      # Has user clicked "Investigate"?
```

### 7.3 Sample Signal (Matches Figma)

```json
{
  "_id": "signal_001",
  "type": "DROP_OFF",
  "severity": "CRITICAL",
  
  "title": "Significant Drop-off in Onboarding Flow",
  "description": "Step 3 completion rate dropped from 68% to 42% in the last 48 hours.",
  
  "metric_name": "Activation Rate",
  "metric_change": "-26%",
  "confidence": 96,
  
  "page": "/onboarding/step-3",
  "element": null,
  
  "affected_users": 156,
  "session_count": 203,
  "recording_urls": [],
  
  "created_at": "2026-02-04T08:00:00Z",
  "detected_ago": "2 hours ago",
  
  "processed": false,
  "investigated": false
}
```

### 7.4 Implementation Tasks

| Task | File | Description |
|------|------|-------------|
| 7.4.1 | `agents/models.py` | Pydantic models for Signal, Insight, etc. |
| 7.4.2 | `agents/db.py` | MongoDB connection helper |
| 7.4.3 | `agents/config.py` | Load environment variables |
| 7.4.4 | `data/mock/signals.json` | Sample signals matching Figma |
| 7.4.5 | `scripts/seed_data.py` | Seed MongoDB with mock data |
| 7.4.6 | `agents/watcher.py` | Main Watcher agent logic |
| 7.4.7 | `scripts/run_watcher.py` | CLI to run Watcher manually |

### 7.5 Deliverables

- [ ] `agents/models.py` â€” Pydantic models
- [ ] `agents/db.py` â€” MongoDB helper
- [ ] `agents/watcher.py` â€” Watcher Agent
- [ ] `scripts/seed_data.py` â€” Mock data seeder
- [ ] Signals appearing in MongoDB matching Figma design

---

## 8. Phase 2: The Analyst Agent (Brain)

**Goal:** Take Signals, analyze root cause, propose fixes, create UX Intelligence issues.

**Duration:** 3-4 hours

### 8.1 What The Analyst Does

```
INPUT:  Unprocessed Signal from MongoDB
        + Codebase context (component files)

PROCESS:
  1. Map DOM element â†’ React component file
  2. Read component source code
  3. Use LLM to analyze:
     - WHY is this causing friction?
     - WHAT is the root cause?
     - HOW should we fix it?
  4. Calculate impact and confidence

OUTPUT: UX Issue document in MongoDB â†’ Displayed in "UX Intelligence" page
```

### 8.2 MongoDB Schema: UX Issues Collection

```python
class UXIssue(BaseModel):
    """
    Matches Figma: UX Intelligence card
    """
    _id: Optional[str] = None
    signal_id: str                  # Reference to original signal
    
    # Status
    status: str                     # "PENDING", "TASK_CREATED", "PR_OPENED"
    priority: Severity              # CRITICAL, HIGH, MEDIUM, LOW
    
    # Display fields (from Figma)
    title: str                      # "Payment Form Input Not Responding"
    page_info: str                  # "Page: Checkout - Step 2"
    affected_users: int             # 234
    replays_count: int              # 87
    
    # Analysis (from LLM)
    description: str                # "Users rage-clicking on credit card input..."
    root_cause: str                 # "Field appears disabled due to CSS z-index issue"
    
    # Impact box
    impact_description: str         # "Blocking 12% of checkout attempts"
    confidence: int                 # 98
    
    # Recommended fix box
    recommended_fix: str            # "Fix CSS z-index - payment iframe covered by form overlay"
    
    # Code location
    file_path: str                  # "src/components/PaymentForm.tsx"
    line_range: Optional[List[int]] = None
    
    # Timestamps
    created_at: datetime = datetime.now()
    task_created_at: Optional[datetime] = None
    pr_url: Optional[str] = None
```

### 8.3 Sample UX Issue (Matches Figma)

```json
{
  "_id": "ux_issue_001",
  "signal_id": "signal_rage_001",
  
  "status": "PENDING",
  "priority": "CRITICAL",
  
  "title": "Payment Form Input Not Responding",
  "page_info": "Checkout - Step 2",
  "affected_users": 234,
  "replays_count": 87,
  
  "description": "Users rage-clicking on credit card input. Field appears disabled due to CSS z-index issue.",
  "root_cause": "The payment iframe has a lower z-index than the form overlay, making it unclickable.",
  
  "impact_description": "Blocking 12% of checkout attempts",
  "confidence": 98,
  
  "recommended_fix": "Fix CSS z-index - payment iframe covered by form overlay",
  
  "file_path": "src/components/PaymentForm.tsx",
  "line_range": [45, 52],
  
  "created_at": "2026-02-04T10:30:00Z",
  "task_created_at": null,
  "pr_url": null
}
```

### 8.4 Implementation Tasks

| Task | File | Description |
|------|------|-------------|
| 8.4.1 | Add `UXIssue` to `agents/models.py` | Pydantic model |
| 8.4.2 | `demo-app/routes.json` | URL â†’ Component mapping |
| 8.4.3 | `agents/analyst.py` | Main Analyst agent |
| 8.4.4 | LLM Prompt | Root cause analysis prompt |
| 8.4.5 | `scripts/run_analyst.py` | CLI to run Analyst |
| 8.4.6 | `data/mock/ux_issues.json` | Sample UX issues |

### 8.5 Deliverables

- [ ] `UXIssue` model in `agents/models.py`
- [ ] `agents/analyst.py` â€” Analyst Agent
- [ ] `demo-app/routes.json` â€” URL mapping
- [ ] LLM prompt that generates good analysis
- [ ] UX Issues appearing in MongoDB matching Figma design

---

## 9. Phase 3: NitroStack MCP Server

**Goal:** Build the complete PMF Acceleration Engine UI using NitroStack.

**Duration:** 4-5 hours

### 9.1 NitroStack Overview

NitroStack provides:
- `@Resource` â€” Read data from MongoDB, return to LLM/UI
- `@Tool` â€” Execute actions (approve, create task, etc.)
- `@Widget` â€” Render beautiful UI components

### 9.2 Resources Specification

#### 9.2.1 Resource: `signals_alerts`

```typescript
// nitrostack/src/resources/signalsAlerts.ts
import { Resource } from 'nitrostack';

@Resource({
  name: 'signals_alerts',
  uri: 'darwin://signals/all',
  description: 'Get all AI-detected signals and alerts'
})
export class SignalsAlertsResource {
  async read() {
    const signals = await db.collection('signals')
      .find({ processed: false })
      .sort({ severity: -1, created_at: -1 })
      .toArray();
    
    // Calculate summary stats (matches Figma)
    const stats = {
      critical_alerts: signals.filter(s => s.severity === 'CRITICAL').length,
      opportunities: signals.filter(s => s.type === 'OPPORTUNITY').length,
      total_signals: signals.length,
      avg_confidence: Math.round(signals.reduce((a, b) => a + b.confidence, 0) / signals.length)
    };
    
    return { stats, signals };
  }
}
```

#### 9.2.2 Resource: `ux_intelligence`

```typescript
// nitrostack/src/resources/uxIntelligence.ts
@Resource({
  name: 'ux_intelligence',
  uri: 'darwin://ux-issues/all',
  description: 'Get UX issues with rage clicks, friction analysis'
})
export class UXIntelligenceResource {
  async read() {
    const issues = await db.collection('ux_issues')
      .find({ status: { $ne: 'PR_OPENED' } })
      .sort({ priority: -1 })
      .toArray();
    
    const stats = {
      critical_issues: issues.filter(i => i.priority === 'CRITICAL').length,
      high_priority: issues.filter(i => i.priority === 'HIGH').length,
      sessions_analyzed: 15600, // From PostHog
      rage_clicks: issues.reduce((a, b) => a + b.affected_users, 0)
    };
    
    return { stats, issues };
  }
}
```

#### 9.2.3 Resource: `decision_center`

```typescript
// nitrostack/src/resources/decisionCenter.ts
@Resource({
  name: 'decision_center',
  uri: 'darwin://recommendations/pending',
  description: 'Get AI-generated product recommendations awaiting approval'
})
export class DecisionCenterResource {
  async read() {
    const recommendations = await db.collection('insights')
      .find({ status: 'PENDING_APPROVAL' })
      .sort({ priority: -1, created_at: -1 })
      .toArray();
    
    const stats = {
      total_recommendations: recommendations.length,
      critical_priority: recommendations.filter(r => r.priority === 'CRITICAL').length,
      high_priority: recommendations.filter(r => r.priority === 'HIGH').length,
      avg_confidence: Math.round(recommendations.reduce((a, b) => a + b.confidence, 0) / recommendations.length)
    };
    
    return { stats, recommendations };
  }
}
```

### 9.3 Tools Specification

#### 9.3.1 Tool: `investigate_signal`

```typescript
// nitrostack/src/tools/investigate.ts
@Tool({
  name: 'investigate_signal',
  description: 'Mark a signal as being investigated, triggers Analyst Agent'
})
export class InvestigateTool {
  inputSchema = {
    type: 'object',
    properties: {
      signal_id: { type: 'string', description: 'The signal ID to investigate' }
    },
    required: ['signal_id']
  };
  
  async execute({ signal_id }) {
    await db.collection('signals').updateOne(
      { _id: signal_id },
      { $set: { investigated: true, investigated_at: new Date() } }
    );
    
    return {
      success: true,
      message: `ğŸ” Investigation started for signal ${signal_id}. Analyst Agent will analyze shortly.`
    };
  }
}
```

#### 9.3.2 Tool: `create_task` (KEY FOR DARWIN DEMO)

```typescript
// nitrostack/src/tools/createTask.ts
@Tool({
  name: 'create_task',
  description: 'Create a fix task from a UX issue, triggers Engineer Agent'
})
export class CreateTaskTool {
  inputSchema = {
    type: 'object',
    properties: {
      issue_id: { type: 'string', description: 'The UX issue ID' },
      approved_by: { type: 'string', description: 'Name of approver' }
    },
    required: ['issue_id']
  };
  
  async execute({ issue_id, approved_by }) {
    await db.collection('ux_issues').updateOne(
      { _id: issue_id },
      { 
        $set: { 
          status: 'TASK_CREATED',
          task_created_at: new Date(),
          approved_by: approved_by || 'anonymous'
        } 
      }
    );
    
    return {
      success: true,
      message: `âœ… Task created! Engineer Agent will now generate the code fix and open a PR.`,
      widget: 'task_created_confirmation'
    };
  }
}
```

#### 9.3.3 Tool: `add_to_roadmap`

```typescript
// nitrostack/src/tools/addToRoadmap.ts
@Tool({
  name: 'add_to_roadmap',
  description: 'Add a recommendation to the product roadmap'
})
export class AddToRoadmapTool {
  inputSchema = {
    type: 'object',
    properties: {
      recommendation_id: { type: 'string' },
      approved_by: { type: 'string' }
    },
    required: ['recommendation_id']
  };
  
  async execute({ recommendation_id, approved_by }) {
    await db.collection('insights').updateOne(
      { _id: recommendation_id },
      { 
        $set: { 
          status: 'APPROVED',
          approved_at: new Date(),
          approved_by: approved_by || 'anonymous'
        } 
      }
    );
    
    return {
      success: true,
      message: `ğŸ“‹ Added to roadmap! This recommendation is now prioritized.`
    };
  }
}
```

### 9.4 Widgets Specification

#### 9.4.1 Widget: MetricCard

```typescript
// nitrostack/src/widgets/MetricCard.tsx
@Widget('metric_card')
export function MetricCard({ 
  label, 
  value, 
  change, 
  changeType 
}: {
  label: string;
  value: string;
  change?: string;
  changeType?: 'positive' | 'negative' | 'neutral';
}) {
  return (
    <div className="bg-white border border-gray-100 rounded-xl p-6">
      <div className="text-sm text-gray-500 font-medium">{label}</div>
      <div className="text-4xl font-bold text-gray-900 mt-2">{value}</div>
      {change && (
        <div className={`text-sm mt-2 flex items-center gap-1 ${
          changeType === 'positive' ? 'text-emerald-500' : 
          changeType === 'negative' ? 'text-red-500' : 'text-gray-500'
        }`}>
          {changeType === 'positive' ? 'â†—' : changeType === 'negative' ? 'â†˜' : 'â†’'}
          {change}
        </div>
      )}
    </div>
  );
}
```

#### 9.4.2 Widget: UXIssueCard (KEY FOR DARWIN)

```typescript
// nitrostack/src/widgets/UXIssueCard.tsx
@Widget('ux_issue_card')
export function UXIssueCard({ issue }: { issue: UXIssue }) {
  return (
    <div className="bg-white border border-gray-100 rounded-xl p-6">
      {/* Header */}
      <div className="flex items-start justify-between">
        <div className="flex items-center gap-3">
          <span className="text-2xl">âœ‹</span>
          <div>
            <h3 className="text-lg font-semibold text-gray-900">{issue.title}</h3>
            <span className={`text-xs px-2 py-1 rounded-full ${
              issue.priority === 'CRITICAL' 
                ? 'bg-red-100 text-red-600' 
                : 'bg-yellow-100 text-yellow-700'
            }`}>
              {issue.priority.toLowerCase()}
            </span>
          </div>
        </div>
      </div>
      
      {/* Page info */}
      <div className="text-sm text-gray-500 mt-3">
        Page: {issue.page_info} â€¢ Affected: {issue.affected_users} users â€¢ Replays: {issue.replays_count}
      </div>
      
      {/* Description */}
      <p className="text-gray-700 mt-4">{issue.description}</p>
      
      {/* Impact & Confidence */}
      <div className="grid grid-cols-2 gap-4 mt-4 p-4 bg-gray-50 rounded-lg">
        <div>
          <div className="text-xs text-gray-500 uppercase">Impact</div>
          <div className="font-medium">{issue.impact_description}</div>
        </div>
        <div>
          <div className="text-xs text-gray-500 uppercase">Confidence</div>
          <div className="font-medium">{issue.confidence}%</div>
        </div>
      </div>
      
      {/* Recommended Fix */}
      <div className="mt-4 p-4 bg-emerald-50 rounded-lg border border-emerald-100">
        <div className="text-xs text-emerald-600 uppercase font-medium">Recommended Fix</div>
        <div className="flex items-center justify-between mt-2">
          <span className="text-gray-700">{issue.recommended_fix}</span>
          <button 
            className="bg-gray-900 text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-gray-800 flex items-center gap-2"
            data-tool="create_task"
            data-issue-id={issue._id}
          >
            Create Task â†’
          </button>
        </div>
      </div>
    </div>
  );
}
```

### 9.5 Implementation Tasks

| Task | File | Description |
|------|------|-------------|
| 9.5.1 | `nitrostack/package.json` | Initialize with dependencies |
| 9.5.2 | `nitrostack/tailwind.config.js` | Figma design tokens |
| 9.5.3 | `nitrostack/src/db/mongodb.ts` | MongoDB client |
| 9.5.4 | `nitrostack/src/resources/signalsAlerts.ts` | Signals & Alerts resource |
| 9.5.5 | `nitrostack/src/resources/uxIntelligence.ts` | UX Intelligence resource |
| 9.5.6 | `nitrostack/src/resources/decisionCenter.ts` | Decision Center resource |
| 9.5.7 | `nitrostack/src/tools/createTask.ts` | Create Task tool |
| 9.5.8 | `nitrostack/src/tools/investigate.ts` | Investigate tool |
| 9.5.9 | `nitrostack/src/tools/addToRoadmap.ts` | Add to Roadmap tool |
| 9.5.10 | `nitrostack/src/widgets/MetricCard.tsx` | Metric card widget |
| 9.5.11 | `nitrostack/src/widgets/UXIssueCard.tsx` | UX Issue card widget |
| 9.5.12 | `nitrostack/src/index.ts` | Server entry, register all |

### 9.6 Deliverables

- [ ] NitroStack server running
- [ ] All Resources returning data from MongoDB
- [ ] All Tools updating MongoDB correctly
- [ ] Widgets rendering in Figma style
- [ ] Can test in NitroStudio
- [ ] Ready for NitroCloud deployment

---

## 10. Phase 4: The Engineer Agent (Hands)

**Goal:** Watch for task-created issues, generate code, create GitHub PR.

**Duration:** 3-4 hours

### 10.1 What The Engineer Does

```
INPUT:  UX Issue with status = "TASK_CREATED"
        + Target repository

PROCESS:
  1. Read the target file from repo
  2. Use LLM to generate the code fix
  3. Validate (syntax check / build)
  4. Create branch and commit
  5. Open Pull Request

OUTPUT: PR URL stored in issue document
```

### 10.2 Implementation Tasks

| Task | File | Description |
|------|------|-------------|
| 10.2.1 | `agents/engineer.py` | Main Engineer agent |
| 10.2.2 | GitHub integration | PyGithub for PR creation |
| 10.2.3 | Code generation prompt | LLM prompt for writing fixes |
| 10.2.4 | `scripts/run_engineer.py` | CLI to run Engineer |

### 10.3 Engineer Agent Code

```python
# agents/engineer.py

class EngineerAgent:
    def __init__(self):
        self.db = get_mongodb_client()
        self.github = Github(os.getenv('GITHUB_TOKEN'))
        self.llm = OpenAI()
    
    def run(self):
        """Process all task-created issues."""
        issues = self.db.ux_issues.find({"status": "TASK_CREATED"})
        
        for issue in issues:
            print(f"ğŸ‘©â€ğŸ’» Processing: {issue['title']}")
            
            # Get current code
            current_code = self.read_file_from_repo(issue['file_path'])
            
            # Generate fix
            new_code = self.generate_code_fix(issue, current_code)
            
            # Create PR
            pr_url = self.create_pull_request(issue, new_code)
            
            # Update database
            self.db.ux_issues.update_one(
                {"_id": issue["_id"]},
                {"$set": {"status": "PR_OPENED", "pr_url": pr_url}}
            )
            
            print(f"âœ… PR Created: {pr_url}")
    
    def create_pull_request(self, issue, new_code):
        repo = self.github.get_repo(f"{OWNER}/{REPO}")
        
        branch_name = f"darwin/fix-{issue['_id']}"
        
        # Create branch
        base = repo.get_branch("main")
        repo.create_git_ref(f"refs/heads/{branch_name}", base.commit.sha)
        
        # Update file
        file = repo.get_contents(issue['file_path'])
        repo.update_file(
            issue['file_path'],
            f"fix: {issue['recommended_fix']}",
            new_code,
            file.sha,
            branch=branch_name
        )
        
        # Create PR with beautiful description
        pr = repo.create_pull(
            title=f"ğŸ§¬ Darwin Fix: {issue['title']}",
            body=f"""
## ğŸ•µï¸ Issue Detected

**{issue['title']}**

{issue['description']}

## ğŸ“Š Impact

- **Affected Users:** {issue['affected_users']}
- **Impact:** {issue['impact_description']}
- **Confidence:** {issue['confidence']}%

## ğŸ”§ Root Cause

{issue['root_cause']}

## âœ… Fix Applied

{issue['recommended_fix']}

---

*This PR was automatically generated by Darwin ğŸ§¬*
*The Self-Evolving Product Engine*
            """,
            head=branch_name,
            base="main"
        )
        
        return pr.html_url
```

### 10.4 Deliverables

- [ ] `agents/engineer.py` â€” Engineer Agent
- [ ] GitHub PR creation working
- [ ] Issue status updates to `PR_OPENED`
- [ ] PR has beautiful description matching Darwin branding

---

## 11. Phase 5: Demo Polish & Integration

**Goal:** Make it demo-ready with the "magical moment."

**Duration:** 2-3 hours

### 11.1 Demo E-commerce App Bug

The demo app should have an intentional bug that Darwin can find and fix:

```tsx
// demo-app/src/components/PaymentForm.tsx

export const PaymentForm = () => {
  return (
    <div className="payment-container">
      {/* Overlay that accidentally covers the iframe */}
      <div className="form-overlay" style={{ zIndex: 100 }}>
        <label>Card Details</label>
      </div>
      
      {/* Payment iframe - BUG: z-index is lower than overlay! */}
      <iframe 
        src="https://payment-processor.com/iframe"
        className="payment-iframe"
        style={{ zIndex: 1 }}  // â† THE BUG: Should be higher than overlay
      />
      
      <button className="submit-btn">Complete Payment</button>
    </div>
  );
};
```

### 11.2 Seed Data for Demo

```json
// data/mock/ux_issues.json
[
  {
    "_id": "ux_issue_demo_001",
    "signal_id": "signal_rage_demo",
    "status": "PENDING",
    "priority": "CRITICAL",
    "title": "Payment Form Input Not Responding",
    "page_info": "Checkout - Step 2",
    "affected_users": 234,
    "replays_count": 87,
    "description": "Users rage-clicking on credit card input. Field appears disabled due to CSS z-index issue.",
    "root_cause": "The payment iframe has z-index: 1, but the form overlay has z-index: 100, making the iframe unclickable.",
    "impact_description": "Blocking 12% of checkout attempts",
    "confidence": 98,
    "recommended_fix": "Fix CSS z-index - set payment iframe z-index to 101",
    "file_path": "src/components/PaymentForm.tsx",
    "line_range": [12, 16],
    "created_at": "2026-02-04T10:30:00Z"
  }
]
```

### 11.3 End-to-End Demo Flow

```
1. OPEN NITROCHAT / NITROSTUDIO
   â†’ Show the PMF Acceleration Engine dashboard
   â†’ "This is our AI Product Copilot..."

2. NAVIGATE TO UX INTELLIGENCE
   â†’ Show the stats: 1 Critical Issue, 234 Rage Clicks
   â†’ "Darwin has detected a critical UX issue..."

3. SHOW THE ISSUE CARD
   â†’ "Payment Form Input Not Responding"
   â†’ Point out: affected users, confidence, recommended fix
   â†’ "Darwin analyzed session recordings and found the root cause..."

4. CLICK "CREATE TASK" 
   â†’ "As a PM, I agree with this fix. Let's do it."
   â†’ Click the button
   â†’ Show success message

5. WATCH TERMINAL (split screen)
   â†’ Run: python scripts/run_engineer.py
   â†’ "Darwin is now writing the code..."
   â†’ Show PR creation progress

6. THE MAGICAL MOMENT ğŸ‰
   â†’ Switch to GitHub
   â†’ Refresh
   â†’ BOOM â€” PR appears!
   â†’ "ğŸ§¬ Darwin Fix: Payment Form Input Not Responding"
   â†’ Show the beautiful PR description

7. SHOW THE FIX
   â†’ Open the PR diff
   â†’ Show: z-index changed from 1 to 101
   â†’ "A one-line fix that was blocking 12% of checkouts!"
```

### 11.4 Deliverables

- [ ] Demo e-commerce app with intentional bug
- [ ] Seed data ready
- [ ] Full flow working end-to-end
- [ ] NitroStack deployed to NitroCloud
- [ ] Shareable NitroChat link
- [ ] Demo script practiced

---

## 12. Demo Script

### Slide 1: The Problem (30 seconds)

> "Every product team has this problem: You have analytics showing WHERE users struggle, but it takes WEEKS to actually fix it. 
> 
> The insight sits in a Jira backlog. Engineers are busy. Users churn.
> 
> We call this the 'Insight-to-Action Latency' â€” and it's killing your PMF velocity."

### Slide 2: Introducing Darwin (30 seconds)

> "We built Darwin â€” an Autonomous Growth Engineer.
> 
> Darwin doesn't just REPORT the weather. It FIXES the roof.
> 
> It monitors your analytics, detects friction, analyzes root causes, and opens Pull Requests â€” all automatically."

### Slide 3: Live Demo (3 minutes)

1. Show PMF Acceleration Engine dashboard
2. Navigate to UX Intelligence
3. Show the critical issue card
4. Click "Create Task"
5. Show Engineer Agent running
6. **Switch to GitHub â†’ BOOM â€” PR appears!** ğŸ‰
7. Show the one-line fix

### Slide 4: The Architecture (30 seconds)

> "Darwin uses three specialized agents:
> - The Watcher monitors PostHog for friction signals
> - The Analyst diagnoses root causes using AI
> - The Engineer writes code and opens PRs
> 
> All coordinated through MongoDB, with NitroStack providing the human-in-the-loop interface."

### Slide 5: Why This Matters (30 seconds)

> "We turned weeks of insight-to-action into minutes.
> 
> And because there's human approval, it's safe for production.
> 
> This is the future of product development â€” AI that doesn't just analyze, but acts."

---

## 13. Hackathon Scope Focus

### 13.1 MVP for Demo (Must Have)

| Component | Status |
|-----------|--------|
| MongoDB with seed data | Required |
| Watcher Agent (can be mock) | Required |
| Analyst Agent (can use seed data) | Required |
| NitroStack UX Intelligence page | **Required** |
| `create_task` Tool | **Required** |
| Engineer Agent | **Required** |
| GitHub PR creation | **Required** |

### 13.2 Nice to Have

| Component | Priority |
|-----------|----------|
| Product Health page | Medium |
| Signals & Alerts page | Medium |
| Decision Center page | Medium |
| Real PostHog integration | Low |
| NitroCloud deployment | Low |

### 13.3 Focused Demo Flow

```
UX Intelligence â†’ "Create Task" â†’ Engineer Agent â†’ GitHub PR
```

This single flow demonstrates:
- âœ… AI detecting issues (Watcher output)
- âœ… AI analyzing root cause (Analyst output)
- âœ… Human-in-the-loop approval (NitroStack Tool)
- âœ… AI executing fixes (Engineer Agent)
- âœ… Real code changes (GitHub PR)

---

## ğŸ“Š Time Estimate Summary

| Phase | Duration | Cumulative |
|-------|----------|------------|
| Phase 0: Foundation | 1-2 hours | 2 hours |
| Phase 1: Watcher | 2-3 hours | 5 hours |
| Phase 2: Analyst | 3-4 hours | 9 hours |
| Phase 3: NitroStack | 4-5 hours | 14 hours |
| Phase 4: Engineer | 3-4 hours | 18 hours |
| Phase 5: Polish | 2-3 hours | 21 hours |

**Total: ~21 hours of focused work**

---

## ğŸš€ Ready to Start?

Once you approve this plan, we'll begin with **Phase 0: Foundation Setup**.

Let's build Darwin! ğŸ§¬

---

*Last updated: February 4, 2026*
*Version: 2.0 â€” NitroStack + Figma Integration*
